<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Screenshots.Js</title>
    <link href="pastie.css" rel="stylesheet" />
</head>

<body>

<div class="highlight"><pre><a name="docs--screenshots.js-pyg.html-1"></a><span class="kd">var</span> <span class="nx">casper</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;casper&#39;</span><span class="p">).</span><span class="nx">create</span><span class="p">({</span>
<a name="docs--screenshots.js-pyg.html-2"></a>    <span class="nx">viewportSize</span> <span class="o">:</span> <span class="p">{</span><span class="nx">width</span> <span class="o">:</span> <span class="mi">800</span><span class="p">,</span> <span class="nx">height</span> <span class="o">:</span> <span class="mi">600</span><span class="p">},</span>
<a name="docs--screenshots.js-pyg.html-3"></a>    <span class="nx">verbose</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
<a name="docs--screenshots.js-pyg.html-4"></a>    <span class="nx">logLevel</span><span class="o">:</span> <span class="s2">&quot;debug&quot;</span><span class="p">,</span>
<a name="docs--screenshots.js-pyg.html-5"></a><span class="p">});</span>
<a name="docs--screenshots.js-pyg.html-6"></a>
<a name="docs--screenshots.js-pyg.html-7"></a><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s2">&quot;http://localhost:8000/polls/&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">userInterface</span><span class="p">()</span> <span class="p">{</span>
<a name="docs--screenshots.js-pyg.html-8"></a>    <span class="k">this</span><span class="p">.</span><span class="nx">capture</span><span class="p">(</span><span class="s2">&quot;no-polls-available.png&quot;</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-9"></a><span class="p">});</span>
<a name="docs--screenshots.js-pyg.html-10"></a>
<a name="docs--screenshots.js-pyg.html-11"></a><span class="nx">casper</span><span class="p">.</span><span class="nx">thenOpen</span><span class="p">(</span><span class="s1">&#39;http://localhost:8000/admin/&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">loginAdmin</span><span class="p">()</span> <span class="p">{</span>
<a name="docs--screenshots.js-pyg.html-12"></a>        <span class="k">this</span><span class="p">.</span><span class="nx">capture</span><span class="p">(</span><span class="s2">&quot;login.png&quot;</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-13"></a>        <span class="k">this</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span>
<a name="docs--screenshots.js-pyg.html-14"></a>            <span class="s1">&#39;form[action=&quot;/admin/&quot;]&#39;</span><span class="p">,</span>
<a name="docs--screenshots.js-pyg.html-15"></a>            <span class="p">{</span> <span class="nx">username</span><span class="o">:</span> <span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="nx">password</span><span class="o">:</span> <span class="s1">&#39;password&#39;</span> <span class="p">},</span>
<a name="docs--screenshots.js-pyg.html-16"></a>            <span class="kc">true</span>
<a name="docs--screenshots.js-pyg.html-17"></a>            <span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-18"></a>        <span class="k">this</span><span class="p">.</span><span class="nx">waitForSelector</span><span class="p">(</span><span class="s2">&quot;#site-name&quot;</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-19"></a>        <span class="p">});</span>
<a name="docs--screenshots.js-pyg.html-20"></a>
<a name="docs--screenshots.js-pyg.html-21"></a><span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
<a name="docs--screenshots.js-pyg.html-22"></a>    <span class="k">this</span><span class="p">.</span><span class="nx">capture</span><span class="p">(</span><span class="s2">&quot;logged-in-admin.png&quot;</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-23"></a>    <span class="k">this</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="s1">&#39;a[href=&quot;/admin/polls/poll/&quot;]&#39;</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-24"></a>    <span class="k">this</span><span class="p">.</span><span class="nx">waitForSelector</span><span class="p">(</span><span class="s2">&quot;#changelist&quot;</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-25"></a><span class="p">});</span>
<a name="docs--screenshots.js-pyg.html-26"></a>
<a name="docs--screenshots.js-pyg.html-27"></a><span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
<a name="docs--screenshots.js-pyg.html-28"></a>    <span class="k">this</span><span class="p">.</span><span class="nx">capture</span><span class="p">(</span><span class="s2">&quot;polls-admin.png&quot;</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-29"></a>    <span class="k">this</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="s2">&quot;.addlink&quot;</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-30"></a>    <span class="k">this</span><span class="p">.</span><span class="nx">waitForSelector</span><span class="p">(</span><span class="s2">&quot;#poll_form&quot;</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-31"></a><span class="p">});</span>
<a name="docs--screenshots.js-pyg.html-32"></a>
<a name="docs--screenshots.js-pyg.html-33"></a><span class="c1">/// &quot;add-new-poll&quot;</span>
<a name="docs--screenshots.js-pyg.html-34"></a><span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="nx">addNewPoll</span><span class="p">()</span> <span class="p">{</span>
<a name="docs--screenshots.js-pyg.html-35"></a>    <span class="k">this</span><span class="p">.</span><span class="nx">capture</span><span class="p">(</span><span class="s2">&quot;add-new-poll.png&quot;</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-36"></a>    <span class="k">this</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span>
<a name="docs--screenshots.js-pyg.html-37"></a>        <span class="s1">&#39;#poll_form&#39;</span><span class="p">,</span>
<a name="docs--screenshots.js-pyg.html-38"></a>        <span class="p">{</span>
<a name="docs--screenshots.js-pyg.html-39"></a>            <span class="nx">question</span><span class="o">:</span> <span class="s1">&#39;What is your favorite color?&#39;</span><span class="p">,</span>
<a name="docs--screenshots.js-pyg.html-40"></a>        <span class="s1">&#39;choice_set-0-choice_text&#39;</span> <span class="o">:</span> <span class="s2">&quot;Blue. No, green!&quot;</span><span class="p">,</span>
<a name="docs--screenshots.js-pyg.html-41"></a>        <span class="s1">&#39;choice_set-1-choice_text&#39;</span> <span class="o">:</span> <span class="s2">&quot;Yellow&quot;</span><span class="p">,</span>
<a name="docs--screenshots.js-pyg.html-42"></a>        <span class="s1">&#39;choice_set-2-choice_text&#39;</span> <span class="o">:</span> <span class="s2">&quot;Red&quot;</span>
<a name="docs--screenshots.js-pyg.html-43"></a>        <span class="p">},</span>
<a name="docs--screenshots.js-pyg.html-44"></a>        <span class="kc">false</span>
<a name="docs--screenshots.js-pyg.html-45"></a>        <span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-46"></a>    <span class="k">this</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="s2">&quot;.datetimeshortcuts a[href*=handleCalendar]&quot;</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-47"></a>    <span class="k">this</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="s2">&quot;.datetimeshortcuts a[href*=handleClock]&quot;</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-48"></a>    <span class="k">this</span><span class="p">.</span><span class="nx">capture</span><span class="p">(</span><span class="s2">&quot;add-new-poll-filled-in.png&quot;</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-49"></a>    <span class="k">this</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="s2">&quot;input[name=_save]&quot;</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-50"></a>    <span class="k">this</span><span class="p">.</span><span class="nx">waitForSelector</span><span class="p">(</span><span class="s2">&quot;li.info&quot;</span><span class="p">)</span>
<a name="docs--screenshots.js-pyg.html-51"></a><span class="p">});</span>
<a name="docs--screenshots.js-pyg.html-52"></a><span class="c1">/// @end</span>
<a name="docs--screenshots.js-pyg.html-53"></a>
<a name="docs--screenshots.js-pyg.html-54"></a><span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
<a name="docs--screenshots.js-pyg.html-55"></a>    <span class="k">this</span><span class="p">.</span><span class="nx">capture</span><span class="p">(</span><span class="s2">&quot;poll-added.png&quot;</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-56"></a><span class="p">});</span>
<a name="docs--screenshots.js-pyg.html-57"></a>
<a name="docs--screenshots.js-pyg.html-58"></a><span class="nx">casper</span><span class="p">.</span><span class="nx">thenOpen</span><span class="p">(</span><span class="s2">&quot;http://localhost:8000/polls/&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
<a name="docs--screenshots.js-pyg.html-59"></a>    <span class="k">this</span><span class="p">.</span><span class="nx">capture</span><span class="p">(</span><span class="s2">&quot;index.png&quot;</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-60"></a>    <span class="k">this</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-61"></a>    <span class="k">this</span><span class="p">.</span><span class="nx">waitForSelector</span><span class="p">(</span><span class="s2">&quot;form&quot;</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-62"></a><span class="p">});</span>
<a name="docs--screenshots.js-pyg.html-63"></a>
<a name="docs--screenshots.js-pyg.html-64"></a><span class="kd">function</span> <span class="nx">randomVote</span><span class="p">(</span><span class="nx">capture</span><span class="p">)</span> <span class="p">{</span>
<a name="docs--screenshots.js-pyg.html-65"></a>    <span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
<a name="docs--screenshots.js-pyg.html-66"></a>        <span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getElementsAttribute</span><span class="p">(</span><span class="s1">&#39;input[name=&quot;choice&quot;]&#39;</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-67"></a>        <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">options</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-68"></a>        <span class="kd">var</span> <span class="nx">option</span> <span class="o">=</span> <span class="nx">options</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span>
<a name="docs--screenshots.js-pyg.html-69"></a>        <span class="k">this</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="s2">&quot;#&quot;</span> <span class="o">+</span> <span class="nx">option</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-70"></a>        <span class="k">if</span> <span class="p">(</span><span class="nx">capture</span><span class="p">)</span> <span class="p">{</span>
<a name="docs--screenshots.js-pyg.html-71"></a>            <span class="k">this</span><span class="p">.</span><span class="nx">capture</span><span class="p">(</span><span class="s2">&quot;voting.png&quot;</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-72"></a>        <span class="p">}</span>
<a name="docs--screenshots.js-pyg.html-73"></a>        <span class="k">this</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="s2">&quot;input[type=submit]&quot;</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-74"></a>        <span class="k">this</span><span class="p">.</span><span class="nx">waitForSelector</span><span class="p">(</span><span class="s2">&quot;ul&quot;</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-75"></a>    <span class="p">});</span>
<a name="docs--screenshots.js-pyg.html-76"></a><span class="p">};</span>
<a name="docs--screenshots.js-pyg.html-77"></a>
<a name="docs--screenshots.js-pyg.html-78"></a><span class="kd">function</span> <span class="nx">voteAgain</span><span class="p">()</span> <span class="p">{</span>
<a name="docs--screenshots.js-pyg.html-79"></a>    <span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
<a name="docs--screenshots.js-pyg.html-80"></a>        <span class="k">this</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-81"></a>    <span class="p">});</span>
<a name="docs--screenshots.js-pyg.html-82"></a><span class="p">};</span>
<a name="docs--screenshots.js-pyg.html-83"></a>
<a name="docs--screenshots.js-pyg.html-84"></a><span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
<a name="docs--screenshots.js-pyg.html-85"></a>    <span class="k">this</span><span class="p">.</span><span class="nx">capture</span><span class="p">(</span><span class="s2">&quot;detail.png&quot;</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-86"></a>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;about to call randomVote&quot;</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-87"></a>    <span class="nx">randomVote</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-88"></a><span class="p">});</span>
<a name="docs--screenshots.js-pyg.html-89"></a>
<a name="docs--screenshots.js-pyg.html-90"></a><span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
<a name="docs--screenshots.js-pyg.html-91"></a>    <span class="k">this</span><span class="p">.</span><span class="nx">capture</span><span class="p">(</span><span class="s2">&quot;voted.png&quot;</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-92"></a><span class="p">});</span>
<a name="docs--screenshots.js-pyg.html-93"></a>
<a name="docs--screenshots.js-pyg.html-94"></a><span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
<a name="docs--screenshots.js-pyg.html-95"></a>    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
<a name="docs--screenshots.js-pyg.html-96"></a>        <span class="nx">randomVote</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-97"></a>        <span class="nx">voteAgain</span><span class="p">();</span>
<a name="docs--screenshots.js-pyg.html-98"></a>    <span class="p">}</span>
<a name="docs--screenshots.js-pyg.html-99"></a><span class="p">})</span>
<a name="docs--screenshots.js-pyg.html-100"></a>
<a name="docs--screenshots.js-pyg.html-101"></a><span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
<a name="docs--screenshots.js-pyg.html-102"></a>    <span class="nx">randomVote</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-103"></a>    <span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
<a name="docs--screenshots.js-pyg.html-104"></a>        <span class="k">this</span><span class="p">.</span><span class="nx">capture</span><span class="p">(</span><span class="s2">&quot;many-votes.png&quot;</span><span class="p">);</span>
<a name="docs--screenshots.js-pyg.html-105"></a>    <span class="p">});</span>
<a name="docs--screenshots.js-pyg.html-106"></a><span class="p">});</span>
<a name="docs--screenshots.js-pyg.html-107"></a>
<a name="docs--screenshots.js-pyg.html-108"></a><span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>


</body>
</html>